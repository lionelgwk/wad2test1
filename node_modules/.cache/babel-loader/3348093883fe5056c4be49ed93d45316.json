{"ast":null,"code":"import axios from 'axios';\n// import { onMounted } from 'vue';\n\n/* eslint-disable */\nexport default {\n  setup() {\n    const showToast = ref;\n  },\n  data() {\n    return {\n      type: \"restaurant\",\n      radius: \"1\",\n      lat: 0,\n      lng: 0,\n      places: []\n    };\n  },\n  computed: {\n    coordinates() {\n      return `${this.lat}, ${this.lng}`;\n    }\n  },\n  methods: {\n    findLocations() {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.lat = position.coords.latitude;\n        this.lng = position.coords.longitude;\n      }, error => {\n        console.log(\"Error getting location\");\n      });\n    },\n    findNearby() {\n      const URL = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${this.lat},${this.lng}&type=${this.type}&radius=${this.radius * 1000}&key=AIzaSyCTHZllCldMYoM9ByF8AcxKPWvIuFJsTx4`;\n      console.log(URL);\n      axios.get(URL).then(response => {\n        this.places = response.data.results;\n        this.addLocationsToGoogleMaps();\n      }).catch(error => {\n        console.log(error.message);\n      });\n    },\n    addLocationsToGoogleMaps() {\n      var map = new google.maps.Map(this.$refs[\"map\"], {\n        zoom: 17,\n        center: new google.maps.LatLng(this.lat, this.lng),\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n      });\n      var infowindow = new google.maps.InfoWindow();\n      this.places.forEach(place => {\n        const lat = place.geometry.location.lat;\n        const lng = place.geometry.location.lng;\n        let marker = new google.maps.Marker({\n          position: new google.maps.LatLng(lat, lng),\n          map: map\n        });\n        google.maps.event.addListener(marker, \"click\", () => {\n          infowindow.setContent(`<div class=\"ui header\">${place.name}</div>\n                        <p>${place.vicinity}</p>`);\n          infowindow.open(map, marker);\n        });\n      });\n    }\n  },\n  mounted() {\n    this.findLocations();\n  },\n  watch: {\n    coordinates() {\n      this.findNearby();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","setup","showToast","ref","data","type","radius","lat","lng","places","computed","coordinates","methods","findLocations","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","console","log","findNearby","URL","get","then","response","results","addLocationsToGoogleMaps","catch","message","map","google","maps","Map","$refs","zoom","center","LatLng","mapTypeId","MapTypeId","ROADMAP","infowindow","InfoWindow","forEach","place","geometry","location","marker","Marker","event","addListener","setContent","name","vicinity","open","mounted","watch"],"sourceRoot":"","sources":["/Users/lionel/Documents/GitHub/wad2test1/src/components/NearbyPlaces.vue"],"sourcesContent":["<template>\n    <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css\"/>\n    \n    <div class=\"toast-wrap\">\n        <div class=\"toastnotif\">\n            loading...\n        </div>\n    </div>\n\n    <div class=\"ui grid\">\n        <div class=\"six wide column\">\n            <form class=\"ui segment large form\">\n                <div class=\"field\">\n                    <div class=\"ui right icon input large\">\n                        <input type=\"text\" placeholder=\"Search for a place\" v-model=\"coordinates\">\n                        <i class=\"search link icon\" @click=\"findLocations\"></i>\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <div class=\"two fields\">\n                        <div class=\"field\">\n                            <select v-model=\"type\">\n                                <option value=\"restaurant\" selected>Restaurants</option>\n                                <option value=\"bar\">Bars</option>\n                                <option value=\"activities\">Activities</option>\n                            </select>\n                        </div>\n\n\n                        <div class=\"field\">\n                            <select v-model=\"radius\">\n                                <option value=\"1\" selected>1 KM</option>\n                                <option value=\"2\">2 KM</option>\n                                <option value=\"3\">3 KM</option>\n                                <option value=\"4\">4 KM</option>\n                                <option value=\"5\">5 KM</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n\n                <button class=\"ui button pink\" @click=\"findNearby\">Find Locations</button>\n            </form>\n\n            <div class=\"ui segment\" style=\"max-height: 500px; overflow:scroll\">\n                <div class=\"ui divided items\">\n                    <div class=\"item\" v-for=\"place in places\" :key=\"place.id\">\n                        <div class=\"content\">\n                            <div class=\"header\">{{place.name}}</div>\n                            <div class=\"meta\">{{place.vicinity}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <div class=\"ten wide column segment ui\" ref=\"map\">\n        </div>\n    </div>\n</template>\n\n<script> \nimport axios from 'axios';\n// import { onMounted } from 'vue';\n\n/* eslint-disable */\nexport default {\n    setup(){\n        const showToast = ref\n    },\n    data() {\n        return {\n            type: \"restaurant\",\n            radius: \"1\",\n            lat: 0,\n            lng: 0,\n            places: []\n        }\n    },\n    computed:{\n        coordinates(){\n            return `${this.lat}, ${this.lng}`;\n        }\n    },\n    methods: {\n        findLocations() {\n            navigator.geolocation.getCurrentPosition(\n                position => {\n                    this.lat = position.coords.latitude;\n                    this.lng = position.coords.longitude;\n                },\n                error => {\n                    console.log(\"Error getting location\");\n                }\n            );\n        },\n        findNearby(){\n            const URL = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${this.lat},${this.lng}&type=${this.type}&radius=${this.radius * 1000}&key=AIzaSyCTHZllCldMYoM9ByF8AcxKPWvIuFJsTx4`;\n            console.log(URL);\n            axios.get(URL)\n                .then(response => {\n                    this.places = response.data.results;\n                    this.addLocationsToGoogleMaps();\n                })\n                .catch( error => {\n                    console.log(error.message);\n                });\n        },\n        addLocationsToGoogleMaps(){\n            var map = new google.maps.Map(this.$refs[\"map\"],{\n                zoom: 17,\n                center: new google.maps.LatLng(this.lat, this.lng),\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            });\n\n            var infowindow = new google.maps.InfoWindow();\n\n            this.places.forEach(place => {\n                const lat = place.geometry.location.lat;\n                const lng = place.geometry.location.lng;\n\n                let marker = new google.maps.Marker({\n                    position: new google.maps.LatLng(lat,lng),\n                    map: map\n                });\n\n                google.maps.event.addListener(marker, \"click\", () => {\n\n                    infowindow.setContent(\n                        `<div class=\"ui header\">${place.name}</div>\n                        <p>${place.vicinity}</p>`\n                    );\n\n                    infowindow.open(map, marker);\n                });\n            })\n        }\n    },\n    mounted(){\n        this.findLocations();\n    },\n    watch: {\n        coordinates(){\n            this.findNearby();\n        }\n    }\n}\n</script>\n\n<style>\n  .toast-wrap {\n    position: fixed;\n    width: 100%;\n    top: 20px;\n    z-index: 99999999;\n  }\n  .toastnotif {\n    padding: 20px;\n    color: white;\n    background: #ff0062;\n    border-radius: 10px;\n    box-shadow: 1px 3px 5px rgba(0,0,0,0.2);\n    max-width: 400px;\n    margin: 0 auto;\n    z-index: 999999999;\n  }\n</style>"]},"metadata":{},"sourceType":"module"}