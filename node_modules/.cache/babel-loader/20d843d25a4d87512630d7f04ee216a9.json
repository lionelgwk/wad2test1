{"ast":null,"code":"import axios from 'axios';\n\n// import PlaceAutocomplete from './PlaceAutocomplete.vue';\n\n/* eslint-disable */\nexport default {\n  mounted() {\n    this.findLocations();\n    const autocomplete = new google.maps.places.Autocomplete(this.$refs[\"add\"], {\n      bounds: new google.maps.LatLngBounds(new google.maps.LatLng(1.3521, 103.8198)),\n      componentRestrictions: {\n        country: \"sg\"\n      },\n      type: [\"address\", \"establishment\", \"point_of_interest\", \"food\"]\n    });\n    autocomplete.addListener('place_changed', () => {\n      const place = autocomplete.getPlace();\n      const lat = place.geometry.location.lat();\n      const lng = place.geometry.location.lng();\n      this.lat = lat;\n      this.lng = lng;\n    });\n  },\n  data() {\n    return {\n      type: \"restaurant\",\n      radius: \"0.2\",\n      lat: 0,\n      lng: 0,\n      places: [],\n      mapDisplay: false,\n      search: \"\",\n      showToast: true,\n      selectedlocation: false\n    };\n  },\n  emits: [\"add-place\"],\n  computed: {\n    coordinates() {\n      return `${this.lat}, ${this.lng}`;\n    }\n  },\n  methods: {\n    addPlace(place) {\n      this.$emit('add-place', place);\n      console.log(place);\n    },\n    findLocations() {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.lat = position.coords.latitude;\n        this.lng = position.coords.longitude;\n      }, error => {\n        console.log(\"Error getting location\");\n      });\n    },\n    findNearby() {\n      const URL = `https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${this.lat},${this.lng}&type=${this.type}&radius=${this.radius * 1000}&key=AIzaSyCTHZllCldMYoM9ByF8AcxKPWvIuFJsTx4`;\n      this.selectedlocation = true;\n      this.showToast = true;\n      axios.get(URL).then(response => {\n        this.places = response.data.results;\n        this.addLocationsToGoogleMaps();\n      }).catch(error => {\n        console.log(error.message);\n      });\n    },\n    addLocationsToGoogleMaps() {\n      var map = new google.maps.Map(this.$refs[\"map\"], {\n        zoom: 17,\n        center: new google.maps.LatLng(this.lat, this.lng),\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n      });\n      this.mapDisplay = true;\n      var infowindow = new google.maps.InfoWindow();\n      this.places.forEach(place => {\n        const lat = place.geometry.location.lat;\n        const lng = place.geometry.location.lng;\n        let marker = new google.maps.Marker({\n          position: new google.maps.LatLng(lat, lng),\n          map: map\n        });\n        google.maps.event.addListener(marker, \"click\", () => {\n          infowindow.setContent(`<div class=\"ui header\">${place.name}</div>\n                        <p>${place.vicinity}</p>`);\n          infowindow.open(map, marker);\n        });\n      });\n    }\n  },\n  watch: {\n    coordinates() {\n      this.findNearby();\n    },\n    type() {\n      this.findNearby();\n    },\n    radius() {\n      this.findNearby();\n    },\n    lat() {\n      this.findNearby();\n    },\n    lng() {\n      this.findNearby();\n    },\n    mapDisplay() {\n      this.showToast = false;\n      this.mapDisplay = false;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","mounted","findLocations","autocomplete","google","maps","places","Autocomplete","$refs","bounds","LatLngBounds","LatLng","componentRestrictions","country","type","addListener","place","getPlace","lat","geometry","location","lng","data","radius","mapDisplay","search","showToast","selectedlocation","emits","computed","coordinates","methods","addPlace","$emit","console","log","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","findNearby","URL","get","then","response","results","addLocationsToGoogleMaps","catch","message","map","Map","zoom","center","mapTypeId","MapTypeId","ROADMAP","infowindow","InfoWindow","forEach","marker","Marker","event","setContent","name","vicinity","open","watch"],"sourceRoot":"","sources":["/Users/caitlinyap/Documents/GitHub/wad2test1/src/components/NearbyPlaces.vue"],"sourcesContent":["<template>\n    <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css\"/>\n    \n    <transition name=\"toastmotion\">\n        <div class=\"toast-wrap\" v-if=\"showToast\">\n            <div class=\"toastnotif\">\n                loading...\n            </div>\n        </div>\n    </transition>\n    <div class=\"container-fluid\">\n    <div class=\"row\">\n        <div class=\"col-lg-4 col-md-6 col-sm-12\">\n            <form class=\"ui segment large form\">\n                <div class=\"field\">\n                    <div class=\"ui right icon input large\">\n                        <input type=\"text\" id=\"placeEnter\" placeholder=\"Enter a place\" ref=\"add\" autocomplete=\"on\"/>\n                        <i class=\"search icon\" @click=\"findNearby\"></i>\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <div class=\"two fields\">\n                        <div class=\"field\">\n                            <select v-model=\"type\">\n                                <option value=\"restaurant\" selected>Restaurants</option>\n                                <option value=\"bar\">Bars</option>\n                                <option value=\"cafe\">Cafes</option>\n                                <option value=\"bowling_alley\">Bowling</option>\n                                <option value=\"bicycle_store\">Cycling</option>\n                                <option value=\"campground\">Camping</option>\n                                <option value=\"clothing_store\">Clothes Shopping</option>\n                                <option value=\"shoe_store\">Shoe Shopping</option>\n                                <option value=\"jewelry_store\">Jewelry Shopping</option>\n                                <option value=\"museum\">Museums</option>\n                                <option value=\"movie_theater\">Movies</option>\n                                <option value=\"casino\">Casinos</option>\n                                <option value=\"park\">Parks</option>\n                                <option value=\"night_club\">Night Clubs</option>\n                                <option value=\"tourist_attraction\">Sightseeing</option>\n                                <option value=\"spa\">Spas</option>\n                                <option value=\"gym\">Workout</option>\n                            </select>\n                        </div>\n\n\n                        <div class=\"field\">\n                            <select v-model=\"radius\">\n                                <option value=\"0.2\" selected>200M</option>\n                                <option value=\"0.4\">400M</option>\n                                <option value=\"0.6\">600M</option>\n                                <option value=\"0.8\">800M</option>\n                                <option value=\"1\">1 KM</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n\n                <button class=\"ui button pink\" @click=\"findNearby\">Find Locations</button>\n            </form>\n\n            <div class=\"ui segment\" style=\"height: 30vh; overflow:scroll\">\n                <div class=\"ui divided items\">\n                    <div class=\"item\" v-for=\"place in places\" :key=\"place.id\">\n                        <div class=\"content\">\n                            <div class=\"header\">{{place.name}}</div>\n                            <div class=\"meta\">{{place.vicinity}}</div>\n                            <button class=\"ui button blue\" @click=\"addPlace(place)\">Add Activity</button>\n                        </div>\n                    </div>\n                    <div class=\"item\" v-else>Suggested activities will appear here!</div>\n                </div>\n            </div>\n\n        </div>\n        <div class=\"col-lg-8 col-md-6 col-sm-12\" ref=\"map\" style=\"height: 55vh;\">\n        </div>\n    </div>\n</div>\n</template>\n\n<script> \nimport axios from 'axios';\n\n// import PlaceAutocomplete from './PlaceAutocomplete.vue';\n\n\n\n\n/* eslint-disable */\nexport default {\n    mounted() {\n        this.findLocations();\n\n        const autocomplete = new google.maps.places.Autocomplete(this.$refs[\"add\"],\n        {\n            bounds: new google.maps.LatLngBounds(\n                new google.maps.LatLng(1.3521, 103.8198)\n            ),\n            componentRestrictions: { country: \"sg\" },\n            type: [\"address\", \"establishment\", \"point_of_interest\", \"food\"],\n        });\n\n        \n        autocomplete.addListener('place_changed', () => {\n            const place = autocomplete.getPlace();\n            const lat = place.geometry.location.lat();\n            const lng = place.geometry.location.lng();\n            this.lat = lat;\n            this.lng = lng;\n            \n        });\n    },\n    data() {\n        return {\n            type: \"restaurant\",\n            radius: \"0.2\",\n            lat: 0,\n            lng: 0,\n            places: [],\n            mapDisplay: false,\n            search: \"\",\n            showToast: true,\n            selectedlocation: false\n        };\n    },\n    emits: [\"add-place\"],\n    computed: {\n        coordinates() {\n            return `${this.lat}, ${this.lng}`;\n        }\n    },\n    methods: {\n        addPlace(place){\n            this.$emit('add-place', place);\n            console.log(place);\n        },\n        findLocations() {\n            navigator.geolocation.getCurrentPosition(position => {\n                this.lat = position.coords.latitude;\n                this.lng = position.coords.longitude;\n            }, error => {\n                console.log(\"Error getting location\");\n            });\n        },\n        findNearby() {\n            const URL = `https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${this.lat},${this.lng}&type=${this.type}&radius=${this.radius * 1000}&key=AIzaSyCTHZllCldMYoM9ByF8AcxKPWvIuFJsTx4`;\n            this.selectedlocation = true;\n            this.showToast = true;\n            axios.get(URL)\n                .then(response => {\n                this.places = response.data.results;\n                this.addLocationsToGoogleMaps();\n                \n            })\n                .catch(error => {\n                console.log(error.message);\n            });\n        },\n        addLocationsToGoogleMaps() {\n            var map = new google.maps.Map(this.$refs[\"map\"], {\n                zoom: 17,\n                center: new google.maps.LatLng(this.lat, this.lng),\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            });\n\n            this.mapDisplay = true;\n            \n            \n            var infowindow = new google.maps.InfoWindow();\n            this.places.forEach(place => {\n                const lat = place.geometry.location.lat;\n                const lng = place.geometry.location.lng;\n                let marker = new google.maps.Marker({\n                    position: new google.maps.LatLng(lat, lng),\n                    map: map\n                });\n                google.maps.event.addListener(marker, \"click\", () => {\n                    infowindow.setContent(`<div class=\"ui header\">${place.name}</div>\n                        <p>${place.vicinity}</p>`);\n                    infowindow.open(map, marker);\n                });\n            });\n\n            \n        }\n    },\n    watch:{\n        coordinates() {\n            this.findNearby();\n        },\n        type() {\n            this.findNearby();\n        },\n        radius() {\n            this.findNearby();\n        },\n        lat() {\n            this.findNearby();\n        },\n        lng() {\n            this.findNearby();\n        },\n        mapDisplay() {\n            this.showToast = false;\n            this.mapDisplay = false;\n        } \n    },\n}\n</script>\n\n<style scoped>\n  .toast-wrap {\n        position: fixed;\n        width: 100%;\n        top: 20px;\n        z-index: 99999999;\n    }\n    .toastnotif {\n        padding: 20px;\n        color: white;\n        background: #ff0062;\n        border-radius: 10px;\n        box-shadow: 1px 3px 5px rgba(0,0,0,0.2);\n        max-width: 400px;\n        margin: 0 auto;\n        z-index: 99999999;\n    }\n    .toastmotion-enter-from {\n        opacity: 0;\n        transform: translateY(-60px);\n    }\n\n    .toastmotion-enter-to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n\n    .toastmotion-enter-active {\n        transition: all 0.3s ease;\n    }\n\n    .toastmotion-leave-from {\n        opacity: 1;\n        transform: translateY(0);\n    }\n\n    .toastmotion-leave-to {\n        opacity: 0;\n        transform: translateY(-60px);\n    }\n\n    .toastmotion-leave-active {\n        transition: all 0.3s ease;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}